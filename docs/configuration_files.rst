Конфигурационные файлы
======================

Основной конфигурационный файл сервера - ``config.xml``. Он расположен в директории ``/etc/clickhouse-server/``.

Отдельные настройки могут быть переопределены в файлах ``*.xml`` и ``*.conf`` из директорий ``conf.d`` и ``config.d`` рядом с конфигом.

У элементов этих конфигурационных файлов могут быть указаны атрибуты ``replace`` или ``remove``.

Если ни один не указан - объединить содержимое элементов рекурсивно с заменой значений совпадающих детей.

Если указано ``replace`` - заменить весь элемент на указанный.

Если указано ``remove`` - удалить элемент.

Также в конфиге могут быть указаны "подстановки". Если у элемента присутствует атрибут ``incl``, то в качестве значения будет использована соответствующая подстановка из файла. По умолчанию, путь к файлу с подстановками - ``/etc/metrika.xml``. Он может быть изменён в конфиге в элементе ``include_from``. Значения подстановок указываются в элементах ``/yandex/имя_подстановки`` этого файла.

В ``config.xml`` может быть указан отдельный конфиг с настройками пользователей, профилей и квот. Относительный путь к нему указывается в элементе users_config. По умолчанию - ``users.xml``. Если ``users_config`` не указан, то настройки пользователей, профилей и квот, указываются непосредственно в ``config.xml``. Сервер следит за изменениями users_config и перезагружает его в рантайме. То есть, вы можете добавлять или изменять пользователей и их настройки без перезапуска сервера.

Для ``users_config`` могут также существовать переопределения в файлах из директории ``users_config.d`` (например, ``users.d``) и подстановки. Стоит заметить, что сервер следит за обновлениями только непосредственно файла ``users.xml``, поэтому всевозможные переопределения не обновляются в рантайме.

Для каждого конфигурационного файла, сервер при запуске генерирует также файлы ``file-preprocessed.xml``. Эти файлы содержат все выполненные подстановки и переопределения, и предназначены для информационных целей. Сам сервер эти файлы не использует, и редактировать их не нужно.
